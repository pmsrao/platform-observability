{
  "datasets": [],
  "pages": [
    {
      "name": "dbv3_page_001",
      "displayName": "Cost & Usage Overview",
      "layout": [
        {
          "widget": {
            "name": "filter_start_date",
            "queries": [],
            "spec": {
              "version": 2,
              "widgetType": "filter-date-picker",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "param_start_date",
                    "displayName": "Start Date"
                  }
                ]
              },
              "selection": {
                "defaultSelection": {
                  "values": {
                    "dataType": "DATE",
                    "values": [{"value": "2024-08-21T00:00:00.000"}]
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Start Date"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 2,
            "height": 1
          }
        },
        {
          "widget": {
            "name": "filter_end_date",
            "queries": [],
            "spec": {
              "version": 2,
              "widgetType": "filter-date-picker",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "param_end_date",
                    "displayName": "End Date"
                  }
                ]
              },
              "selection": {
                "defaultSelection": {
                  "values": {
                    "dataType": "DATE",
                    "values": [{"value": "2024-09-20T00:00:00.000"}]
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "End Date"
              }
            }
          },
          "position": {
            "x": 2,
            "y": 0,
            "width": 2,
            "height": 1
          }
        },
        {
          "widget": {
            "name": "filter_workspace",
            "queries": [
              {
                "name": "workspace_query",
                "query": {
                  "datasetName": "dataset_008",
                  "fields": [
                    {
                      "name": "workspace_id",
                      "expression": "`workspace_id`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "filter-single-select",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "workspace_id",
                    "displayName": "Workspace",
                    "queryName": "workspace_query"
                  }
                ]
              },
              "selection": {
                "defaultSelection": {
                  "values": {
                    "dataType": "STRING",
                    "values": [{"value": "<ALL_WORKSPACES>"}]
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Workspace"
              }
            }
          },
          "position": {
            "x": 4,
            "y": 0,
            "width": 2,
            "height": 1
          }
        },
        {
          "widget": {
            "name": "cost_summary_kpis",
            "queries": [
              {
                "name": "kpi_query",
                "query": {
                  "datasetName": "dataset_001",
                  "fields": [
                    {
                      "name": "days_analyzed",
                      "expression": "`days_analyzed`"
                    },
                    {
                      "name": "total_cost_usd",
                      "expression": "`total_cost_usd`"
                    },
                    {
                      "name": "avg_daily_cost",
                      "expression": "`avg_daily_cost`"
                    },
                    {
                      "name": "total_usage_quantity",
                      "expression": "`total_usage_quantity`"
                    },
                    {
                      "name": "workspaces_analyzed",
                      "expression": "`workspaces_analyzed`"
                    },
                    {
                      "name": "workload_types",
                      "expression": "`workload_types`"
                    },
                    {
                      "name": "compute_types",
                      "expression": "`compute_types`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "days_analyzed",
                    "displayName": "Days Analyzed"
                  },
                  {
                    "fieldName": "total_cost_usd",
                    "displayName": "Total Cost (USD)"
                  },
                  {
                    "fieldName": "avg_daily_cost",
                    "displayName": "Avg Daily Cost"
                  },
                  {
                    "fieldName": "total_usage_quantity",
                    "displayName": "Total Usage"
                  },
                  {
                    "fieldName": "workspaces_analyzed",
                    "displayName": "Workspaces"
                  },
                  {
                    "fieldName": "workload_types",
                    "displayName": "Workload Types"
                  },
                  {
                    "fieldName": "compute_types",
                    "displayName": "Compute Types"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Cost Summary KPIs"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 1,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "daily_cost_trend",
            "queries": [
              {
                "name": "trend_query",
                "query": {
                  "datasetName": "dataset_002",
                  "fields": [
                    {
                      "name": "date",
                      "expression": "`date`"
                    },
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "daily_cost",
                      "expression": "`daily_cost`"
                    },
                    {
                      "name": "rolling_7day_avg_cost",
                      "expression": "`rolling_7day_avg_cost`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "date",
                  "queryName": "trend_query",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "daily_cost",
                  "queryName": "trend_query"
                },
                "color": {
                  "fieldName": "workload_type",
                  "queryName": "trend_query"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Daily Cost Trend by Workload Type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 3,
            "width": 6,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "cost_breakdown_usage_unit",
            "queries": [
              {
                "name": "breakdown_query",
                "query": {
                  "datasetName": "dataset_003",
                  "fields": [
                    {
                      "name": "usage_unit",
                      "expression": "`usage_unit`"
                    },
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "total_cost",
                      "expression": "`total_cost`"
                    },
                    {
                      "name": "total_quantity",
                      "expression": "`total_quantity`"
                    },
                    {
                      "name": "avg_daily_cost",
                      "expression": "`avg_daily_cost`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "usage_unit",
                    "displayName": "Usage Unit"
                  },
                  {
                    "fieldName": "workload_type",
                    "displayName": "Workload Type"
                  },
                  {
                    "fieldName": "total_cost",
                    "displayName": "Total Cost"
                  },
                  {
                    "fieldName": "total_quantity",
                    "displayName": "Total Quantity"
                  },
                  {
                    "fieldName": "avg_daily_cost",
                    "displayName": "Avg Daily Cost"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Cost Breakdown by Usage Unit (DBU vs Network)"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 6,
            "width": 6,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "workload_distribution",
            "queries": [
              {
                "name": "distribution_query",
                "query": {
                  "datasetName": "dataset_004",
                  "fields": [
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "total_cost",
                      "expression": "`total_cost`"
                    },
                    {
                      "name": "total_usage",
                      "expression": "`total_usage`"
                    },
                    {
                      "name": "workspace_count",
                      "expression": "`workspace_count`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "pie",
              "encodings": {
                "color": {
                  "fieldName": "workload_type",
                  "queryName": "distribution_query"
                },
                "theta": {
                  "fieldName": "total_cost",
                  "queryName": "distribution_query"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Workload Type Distribution"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 9,
            "width": 3,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "top_compute_skus",
            "queries": [
              {
                "name": "skus_query",
                "query": {
                  "datasetName": "dataset_005",
                  "fields": [
                    {
                      "name": "compute_type",
                      "expression": "`compute_type`"
                    },
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "total_cost",
                      "expression": "`total_cost`"
                    },
                    {
                      "name": "total_usage",
                      "expression": "`total_usage`"
                    },
                    {
                      "name": "workspace_count",
                      "expression": "`workspace_count`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "compute_type",
                    "displayName": "Compute Type"
                  },
                  {
                    "fieldName": "workload_type",
                    "displayName": "Workload Type"
                  },
                  {
                    "fieldName": "total_cost",
                    "displayName": "Total Cost"
                  },
                  {
                    "fieldName": "total_usage",
                    "displayName": "Total Usage"
                  },
                  {
                    "fieldName": "workspace_count",
                    "displayName": "Workspaces"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Top Compute SKUs by Cost"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 9,
            "width": 3,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "top_jobs_pipelines",
            "queries": [
              {
                "name": "jobs_query",
                "query": {
                  "datasetName": "dataset_006",
                  "fields": [
                    {
                      "name": "job_pipeline_id",
                      "expression": "`job_pipeline_id`"
                    },
                    {
                      "name": "job_name",
                      "expression": "`job_name`"
                    },
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "total_cost",
                      "expression": "`total_cost`"
                    },
                    {
                      "name": "total_usage",
                      "expression": "`total_usage`"
                    },
                    {
                      "name": "days_active",
                      "expression": "`days_active`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "job_pipeline_id",
                    "displayName": "Job/Pipeline ID"
                  },
                  {
                    "fieldName": "job_name",
                    "displayName": "Job Name"
                  },
                  {
                    "fieldName": "workload_type",
                    "displayName": "Workload Type"
                  },
                  {
                    "fieldName": "total_cost",
                    "displayName": "Total Cost"
                  },
                  {
                    "fieldName": "total_usage",
                    "displayName": "Total Usage"
                  },
                  {
                    "fieldName": "days_active",
                    "displayName": "Days Active"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Top Jobs/Pipelines by Cost"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 12,
            "width": 6,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "cost_anomalies",
            "queries": [
              {
                "name": "anomalies_query",
                "query": {
                  "datasetName": "dataset_007",
                  "fields": [
                    {
                      "name": "workspace_id",
                      "expression": "`workspace_id`"
                    },
                    {
                      "name": "job_pipeline_id",
                      "expression": "`job_pipeline_id`"
                    },
                    {
                      "name": "job_name",
                      "expression": "`job_name`"
                    },
                    {
                      "name": "workload_type",
                      "expression": "`workload_type`"
                    },
                    {
                      "name": "compute_type",
                      "expression": "`compute_type`"
                    },
                    {
                      "name": "cost",
                      "expression": "`cost`"
                    },
                    {
                      "name": "anomaly_flag",
                      "expression": "`anomaly_flag`"
                    },
                    {
                      "name": "usage_start_time",
                      "expression": "`usage_start_time`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "workspace_id",
                    "displayName": "Workspace"
                  },
                  {
                    "fieldName": "job_pipeline_id",
                    "displayName": "Job/Pipeline ID"
                  },
                  {
                    "fieldName": "job_name",
                    "displayName": "Job Name"
                  },
                  {
                    "fieldName": "workload_type",
                    "displayName": "Workload Type"
                  },
                  {
                    "fieldName": "compute_type",
                    "displayName": "Compute Type"
                  },
                  {
                    "fieldName": "cost",
                    "displayName": "Cost"
                  },
                  {
                    "fieldName": "anomaly_flag",
                    "displayName": "Anomaly Flag"
                  },
                  {
                    "fieldName": "usage_start_time",
                    "displayName": "Usage Time"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Cost Anomalies with Context"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 15,
            "width": 6,
            "height": 3
          }
        }
      ]
    }
  ]
}
